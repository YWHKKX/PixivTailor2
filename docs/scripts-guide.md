# PixivTailor è„šæœ¬ä½¿ç”¨æŒ‡å—

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»äº†PixivTailoré¡¹ç›®ä¸­çš„æ‰€æœ‰å¯åŠ¨å’Œç®¡ç†è„šæœ¬ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿç†è§£å’Œä½¿ç”¨å„ç§å¯åŠ¨æ–¹å¼ã€‚

## ğŸ“‹ è„šæœ¬æ¦‚è§ˆ

| è„šæœ¬åç§°           | åŠŸèƒ½             | é€‚ç”¨åœºæ™¯         | ç«¯å£       |
| ------------------ | ---------------- | ---------------- | ---------- |
| `start.bat`        | ç»Ÿä¸€å¯åŠ¨å™¨       | å¼€å‘/ç”Ÿäº§ç¯å¢ƒ    | 3000/50051 |
| `start-dev.bat`    | å¼€å‘æ¨¡å¼å¯åŠ¨     | æœ¬åœ°å¼€å‘è°ƒè¯•     | 3000/50051 |
| `start-prod.bat`   | ç”Ÿäº§æ¨¡å¼å¯åŠ¨     | ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²     | 3000/50051 |
| `start-server.bat` | ä»…å¯åŠ¨åç«¯æœåŠ¡å™¨ | ä»…è¿è¡Œåç«¯æœåŠ¡   | 50051      |
| `status.bat`       | æœåŠ¡çŠ¶æ€æ£€æŸ¥     | ç›‘æ§æœåŠ¡è¿è¡ŒçŠ¶æ€ | -          |
| `stop.bat`         | åœæ­¢æ‰€æœ‰æœåŠ¡     | æ¸…ç†è¿è¡Œçš„æœåŠ¡   | -          |
| `build.sh`         | æ„å»ºè„šæœ¬         | Linux/Macæ„å»º    | -          |

## ğŸš€ å¯åŠ¨è„šæœ¬è¯¦è§£

### 1. start.bat - ç»Ÿä¸€å¯åŠ¨å™¨

**åŠŸèƒ½æè¿°**: æœ€å…¨é¢çš„å¯åŠ¨è„šæœ¬ï¼Œæ”¯æŒDockerå’Œæœ¬åœ°ä¸¤ç§æ¨¡å¼

**ç‰¹ç‚¹**:
- ğŸ”„ è‡ªåŠ¨æ£€æµ‹Dockerç¯å¢ƒ
- ğŸ› ï¸ å®Œæ•´çš„ä¾èµ–æ£€æŸ¥ï¼ˆGoã€Node.jsã€Dockerï¼‰
- ğŸ“¦ è‡ªåŠ¨å®‰è£…ä¾èµ–å’Œç”ŸæˆgRPCä»£ç 
- ğŸŒ æ”¯æŒDocker Composeå’Œæœ¬åœ°å¼€å‘æ¨¡å¼
- ğŸ”§ è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨

**å¯åŠ¨æµç¨‹**:
1. ç¯å¢ƒæ£€æŸ¥ï¼ˆGoã€Node.jsã€Dockerï¼‰
2. ç›®å½•ç»“æ„åˆ›å»º
3. gRPCä»£ç ç”Ÿæˆ
4. ä¾èµ–å®‰è£…ï¼ˆåç«¯+å‰ç«¯ï¼‰
5. æœåŠ¡å¯åŠ¨ï¼ˆDockerä¼˜å…ˆï¼Œå¤±è´¥åˆ™æœ¬åœ°æ¨¡å¼ï¼‰

**ä½¿ç”¨åœºæ™¯**:
- é¦–æ¬¡éƒ¨ç½²
- ä¸ç¡®å®šä½¿ç”¨å“ªç§æ¨¡å¼
- éœ€è¦å®Œæ•´çš„æœåŠ¡æ ˆ

### 2. start-dev.bat - å¼€å‘æ¨¡å¼å¯åŠ¨

**åŠŸèƒ½æè¿°**: ä¸“é—¨ç”¨äºæœ¬åœ°å¼€å‘çš„è½»é‡çº§å¯åŠ¨è„šæœ¬

**ç‰¹ç‚¹**:
- ğŸƒâ€â™‚ï¸ å¿«é€Ÿå¯åŠ¨ï¼ˆè·³è¿‡Dockeræ£€æŸ¥ï¼‰
- ğŸ”§ ä»…æ”¯æŒæœ¬åœ°å¼€å‘æ¨¡å¼
- ğŸ“¦ è‡ªåŠ¨å®‰è£…ä¾èµ–
- ğŸŒ è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨

**å¯åŠ¨æµç¨‹**:
1. ç¯å¢ƒæ£€æŸ¥ï¼ˆGoã€Node.jsï¼‰
2. ç›®å½•ç»“æ„åˆ›å»º
3. ä¾èµ–å®‰è£…
4. å¯åŠ¨åç«¯å’Œå‰ç«¯æœåŠ¡

**ä½¿ç”¨åœºæ™¯**:
- æ—¥å¸¸å¼€å‘è°ƒè¯•
- å¿«é€Ÿå¯åŠ¨å¼€å‘ç¯å¢ƒ
- ä¸éœ€è¦Dockerç¯å¢ƒ

**âš ï¸ æ³¨æ„äº‹é¡¹**:
- è„šæœ¬ä¸­ä½¿ç”¨äº†æ­£ç¡®çš„å‘½ä»¤ `tailor.exe server`
- ç«¯å£é…ç½®ä¸º3000ï¼Œä½†å®é™…å¯èƒ½è¿è¡Œåœ¨å…¶ä»–ç«¯å£

### 3. start-prod.bat - ç”Ÿäº§æ¨¡å¼å¯åŠ¨

**åŠŸèƒ½æè¿°**: ä¸“é—¨ç”¨äºç”Ÿäº§ç¯å¢ƒçš„Dockeréƒ¨ç½²è„šæœ¬

**ç‰¹ç‚¹**:
- ğŸ³ å¼ºåˆ¶ä½¿ç”¨Dockeræ¨¡å¼
- ğŸ”„ è‡ªåŠ¨æ„å»ºå’Œé‡å¯æœåŠ¡
- ğŸ“Š æä¾›ç›‘æ§å’Œç®¡ç†å‘½ä»¤
- ğŸ›¡ï¸ ç”Ÿäº§çº§åˆ«çš„é”™è¯¯å¤„ç†

**å¯åŠ¨æµç¨‹**:
1. Dockerç¯å¢ƒæ£€æŸ¥
2. åœæ­¢ç°æœ‰æœåŠ¡
3. æ„å»ºDockeré•œåƒ
4. å¯åŠ¨ç”Ÿäº§æœåŠ¡
5. æœåŠ¡çŠ¶æ€æ£€æŸ¥

**ä½¿ç”¨åœºæ™¯**:
- ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
- æ­£å¼å‘å¸ƒç‰ˆæœ¬
- éœ€è¦å®¹å™¨åŒ–éƒ¨ç½²

### 4. start-server.bat - ä»…å¯åŠ¨åç«¯æœåŠ¡å™¨

**åŠŸèƒ½æè¿°**: åªå¯åŠ¨gRPCåç«¯æœåŠ¡å™¨ï¼Œä¸å¯åŠ¨å‰ç«¯

**ç‰¹ç‚¹**:
- ğŸ¯ ä¸“æ³¨äºåç«¯æœåŠ¡
- ğŸ”§ è‡ªåŠ¨ç¼–è¯‘CLIå·¥å…·
- ğŸ“¦ è‡ªåŠ¨ç”ŸæˆgRPCä»£ç 
- ğŸ› ï¸ é€‚åˆAPIå¼€å‘å’Œæµ‹è¯•

**å¯åŠ¨æµç¨‹**:
1. Goç¯å¢ƒæ£€æŸ¥
2. ç¼–è¯‘CLIå·¥å…·
3. ç”ŸæˆgRPCä»£ç 
4. å¯åŠ¨åç«¯æœåŠ¡å™¨

**ä½¿ç”¨åœºæ™¯**:
- APIå¼€å‘å’Œæµ‹è¯•
- åç«¯æœåŠ¡è°ƒè¯•
- ä¸éœ€è¦å‰ç«¯ç•Œé¢

## ğŸ”§ ç®¡ç†è„šæœ¬è¯¦è§£

### 5. status.bat - æœåŠ¡çŠ¶æ€æ£€æŸ¥

**åŠŸèƒ½æè¿°**: æ£€æŸ¥æ‰€æœ‰æœåŠ¡çš„è¿è¡ŒçŠ¶æ€

**æ£€æŸ¥å†…å®¹**:
- ç«¯å£å ç”¨æƒ…å†µï¼ˆ50051ã€3000ï¼‰
- è¿›ç¨‹çŠ¶æ€ï¼ˆGoã€Node.jsï¼‰
- æœåŠ¡URLä¿¡æ¯

**ä½¿ç”¨åœºæ™¯**:
- æ•…éšœæ’æŸ¥
- æœåŠ¡ç›‘æ§
- çŠ¶æ€ç¡®è®¤

### 6. stop.bat - åœæ­¢æ‰€æœ‰æœåŠ¡

**åŠŸèƒ½æè¿°**: åœæ­¢æ‰€æœ‰è¿è¡Œçš„æœåŠ¡å’Œè¿›ç¨‹

**åœæ­¢å†…å®¹**:
- DockeræœåŠ¡ï¼ˆdocker-compose downï¼‰
- åç«¯è¿›ç¨‹ï¼ˆç«¯å£50051ï¼‰
- å‰ç«¯è¿›ç¨‹ï¼ˆç«¯å£3000ï¼‰
- Node.jsè¿›ç¨‹

**ä½¿ç”¨åœºæ™¯**:
- æ¸…ç†è¿è¡Œç¯å¢ƒ
- é‡å¯æœåŠ¡å‰æ¸…ç†
- æ•…éšœæ¢å¤

### 7. build.sh - Linux/Macæ„å»ºè„šæœ¬

**åŠŸèƒ½æè¿°**: ç”¨äºLinuxå’ŒMacç³»ç»Ÿçš„æ„å»ºè„šæœ¬

**ç‰¹ç‚¹**:
- ğŸ§ è·¨å¹³å°æ”¯æŒ
- ğŸ”§ Goç‰ˆæœ¬æ£€æŸ¥
- ğŸ“¦ ä¾èµ–ç®¡ç†
- ğŸ“– ä½¿ç”¨å¸®åŠ©

## ğŸ“Š è„šæœ¬å¯¹æ¯”åˆ†æ

### start.bat vs start-dev.bat

| ç‰¹æ€§         | start.bat | start-dev.bat |
| ------------ | --------- | ------------- |
| Dockeræ”¯æŒ   | âœ… æ˜¯      | âŒ å¦          |
| ç¯å¢ƒæ£€æŸ¥     | å®Œæ•´      | åŸºç¡€          |
| gRPCä»£ç ç”Ÿæˆ | âœ… æ˜¯      | âŒ å¦          |
| å¯åŠ¨é€Ÿåº¦     | è¾ƒæ…¢      | è¾ƒå¿«          |
| é€‚ç”¨åœºæ™¯     | éƒ¨ç½²/å¼€å‘ | å¼€å‘è°ƒè¯•      |

### ç«¯å£é…ç½®é—®é¢˜

**å‘ç°çš„é—®é¢˜**:
- æ‰€æœ‰è„šæœ¬éƒ½å‡è®¾å‰ç«¯è¿è¡Œåœ¨3000ç«¯å£
- å®é™…è¿è¡Œæ—¶å¯èƒ½å› ä¸ºç«¯å£å ç”¨è€Œä½¿ç”¨å…¶ä»–ç«¯å£
- éœ€è¦åŠ¨æ€æ£€æµ‹å®é™…è¿è¡Œç«¯å£

**å»ºè®®ä¿®å¤**:
```batch
:: æ£€æŸ¥å¯ç”¨ç«¯å£
for /L %%i in (3000,1,3010) do (
    netstat -an | findstr :%%i >nul
    if errorlevel 1 (
        set FRONTEND_PORT=%%i
        goto :port_found
    )
)
```

## ğŸ› ï¸ è„šæœ¬ä¿®å¤å»ºè®®

### 1. start-dev.bat ä¿®å¤

**é—®é¢˜**: ä½¿ç”¨äº†é”™è¯¯çš„å¯åŠ¨å‘½ä»¤
```batch
# é”™è¯¯çš„å‘½ä»¤
start "PixivTailor Backend" cmd /k "tailor.exe server --port :50051"

# æ­£ç¡®çš„å‘½ä»¤
start "PixivTailor Backend" cmd /k "tailor.exe --verbose server --port :50051"
```

### 2. ç«¯å£åŠ¨æ€æ£€æµ‹

**å»ºè®®**: æ·»åŠ ç«¯å£æ£€æµ‹é€»è¾‘
```batch
:: æ£€æµ‹å¯ç”¨ç«¯å£
:find_port
for /L %%i in (3000,1,3010) do (
    netstat -an | findstr :%%i >nul
    if errorlevel 1 (
        set FRONTEND_PORT=%%i
        goto :port_found
    )
)
echo é”™è¯¯: æœªæ‰¾åˆ°å¯ç”¨ç«¯å£
pause
exit /b 1

:port_found
echo ä½¿ç”¨ç«¯å£: %FRONTEND_PORT%
```

### 3. é”™è¯¯å¤„ç†æ”¹è¿›

**å»ºè®®**: æ·»åŠ æ›´è¯¦ç»†çš„é”™è¯¯å¤„ç†
```batch
:: æ£€æŸ¥æœåŠ¡å¯åŠ¨çŠ¶æ€
timeout /t 5 >nul
netstat -an | findstr :50051 >nul
if errorlevel 1 (
    echo é”™è¯¯: åç«¯æœåŠ¡å¯åŠ¨å¤±è´¥
    pause
    exit /b 1
)
```

## ğŸ¯ æ¨èä½¿ç”¨æ–¹å¼

### å¼€å‘ç¯å¢ƒ
```bash
# æ¨èä½¿ç”¨ start-dev.batï¼ˆä¿®å¤åï¼‰
.\start-dev.bat
```

### ç”Ÿäº§ç¯å¢ƒ
```bash
# æ¨èä½¿ç”¨ start-prod.bat
.\start-prod.bat
```

### ä»…åç«¯å¼€å‘
```bash
# æ¨èä½¿ç”¨ start-server.bat
.\start-server.bat
```

### æœåŠ¡ç®¡ç†
```bash
# æ£€æŸ¥çŠ¶æ€
.\status.bat

# åœæ­¢æœåŠ¡
.\stop.bat
```

## ğŸ“ æ€»ç»“

PixivTailoré¡¹ç›®æä¾›äº†å®Œæ•´çš„è„šæœ¬ç”Ÿæ€ç³»ç»Ÿï¼Œæ”¯æŒä»å¼€å‘åˆ°ç”Ÿäº§çš„å„ç§åœºæ™¯ã€‚ä¸»è¦è„šæœ¬åŒ…æ‹¬ï¼š

- **start.bat**: æœ€å…¨é¢çš„å¯åŠ¨å™¨ï¼Œé€‚åˆé¦–æ¬¡éƒ¨ç½²
- **start-dev.bat**: å¼€å‘æ¨¡å¼ï¼Œé€‚åˆæ—¥å¸¸å¼€å‘
- **start-prod.bat**: ç”Ÿäº§æ¨¡å¼ï¼Œé€‚åˆæ­£å¼éƒ¨ç½²
- **start-server.bat**: ä»…åç«¯ï¼Œé€‚åˆAPIå¼€å‘
- **status.bat**: çŠ¶æ€æ£€æŸ¥ï¼Œé€‚åˆæ•…éšœæ’æŸ¥
- **stop.bat**: æœåŠ¡åœæ­¢ï¼Œé€‚åˆç¯å¢ƒæ¸…ç†

å»ºè®®æ ¹æ®å…·ä½“ä½¿ç”¨åœºæ™¯é€‰æ‹©åˆé€‚çš„è„šæœ¬ï¼Œå¹¶æ³¨æ„ä¿®å¤å·²çŸ¥çš„ç«¯å£å’Œå‘½ä»¤é—®é¢˜ã€‚
