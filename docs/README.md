# PixivTailor 文档中心

欢迎使用 PixivTailor 文档中心。本文档提供了完整的项目使用指南和开发文档。

## 📚 文档索引

### 核心模块文档

#### 1. [任务管理器文档](./task-manager.md) 🆕
**核心任务调度系统**

- 统一的任务生命周期管理
- 类型级别的并发控制（同类型串行，不同类型并发）
- 智能队列管理和调度算法
- 任务状态跟踪和实时更新
- WebSocket 实时通知
- 执行器模式扩展机制

**适用场景**: 理解任务调度机制、扩展新任务类型、监控任务状态

#### 2. [AI模块文档](./ai-module.md)
**AI图像生成核心功能**

- Stable Diffusion WebUI 集成
- 多LoRA模型支持
- 批量图像生成
- 配置管理系统（文件系统配置）
- 角色特征管理（从标签提取角色配置）
- 任务管理和监控（任务隔离存储）
- 实时进度更新（WebSocket）
- 图片查看器（支持大图缩放、键盘导航）
- 本地缓存（刷新后配置保持）

**适用场景**: 使用AI生成功能、配置管理、角色配置、创建AI图像

#### 3. [爬虫模块文档](./crawler-module.md)
**Pixiv数据爬取功能**

- 按标签爬取插画（排序、模式筛选）
- 按用户爬取作品
- 单图下载功能
- 智能缓存系统（按日期缓存）
- 多图片下载支持（多页作品）
- 代理和Cookie配置
- 批量文件/文件夹删除
- 文件树浏览（按时间排序）
- 任务类型中文显示

**适用场景**: 从Pixiv爬取数据、图片下载、批量处理、文件管理

#### 4. [标签模块文档](./tagger-module.md)
**图像标签生成功能**

- 自动标签识别（WD14Tagger、DeepBooru）
- 批量图像处理
- 多种保存格式（TXT、JSON、CSV）
- 标签置信度评分
- 多分析器支持（WD14 Tagger、DeepBooru）
- 实时日志流（WebSocket）
- 路径解析和验证

**适用场景**: 图像标注、标签生成、批量处理、AI训练数据准备

#### 5. [配置模块文档](./config-module.md)
**配置文件管理系统**

- 生成配置管理（基于JSON文件）
- 文件系统配置（data/configs/）
- 配置分类和验证
- LoRA配置管理（路径和权重）
- 参数模板（预设参数集）
- 角色配置管理（角色特征提取）
- 标签统计分析（频率和权重）

**适用场景**: 配置管理、参数模板、LoRA配置、角色定义

---

### 使用指南

#### 6. [CLI使用指南](./cli-usage.md)
**命令行工具使用说明**

- 命令行参数说明
- 常用命令示例
- 配置文件说明
- 调试和日志

#### 7. [脚本使用指南](./scripts-guide.md)
**开发脚本说明**

- 开发环境启动
- 构建和打包
- 测试脚本
- 部署脚本

#### 8. [部署指南](./deployment-guide.md)
**项目部署文档**

- 环境要求
- 部署步骤
- 配置说明
- 常见问题

---

## 🗺️ 快速导航

### 按功能分类

#### 🎨 图像生成
- [AI模块文档](./ai-module.md) - AI图像生成
- [配置模块文档](./config-module.md) - 生成配置和角色管理

#### 🕷️ 数据获取
- [爬虫模块文档](./crawler-module.md) - Pixiv爬虫
- [标签模块文档](./tagger-module.md) - 图像标注（WD14/DeepBooru）

#### ⚙️ 系统管理
- [任务管理器文档](./task-manager.md) - 统一任务调度
- [脚本使用指南](./scripts-guide.md) - 开发脚本
- [CLI使用指南](./cli-usage.md) - 命令行工具

#### 🚀 部署运维
- [部署指南](./deployment-guide.md) - 部署文档和WebUI监控

---

## 🏗️ 架构概览

```
┌─────────────────────────────────────────────┐
│           TaskService (核心)                 │
│  - 任务生命周期管理                           │
│  - 智能队列调度                               │
│  - 并发控制                                   │
└─────────────────────────────────────────────┘
         │           │            │
         ├───────────┼────────────┤
         │           │            │
    ┌────▼──┐   ┌───▼──┐    ┌───▼──┐
    │  AI   │   │Crawler│    │ Tag  │
    │Handler│   │Handler│   │Handler│
    └───────┘   └───────┘   └───────┘
```

### 核心设计理念

1. **统一调度** - TaskService 统一管理所有任务
2. **类型并发** - 不同类型任务可并发，同类型串行
3. **执行器模式** - 灵活的任务执行机制
4. **实时更新** - WebSocket 推送任务状态
5. **易于扩展** - 简单的接口添加新功能

---

## 📖 使用建议

### 新手入门
1. 阅读 [部署指南](./deployment-guide.md) 完成环境搭建
2. 阅读 [任务管理器文档](./task-manager.md) 了解核心架构
3. 阅读各模块文档了解具体功能

### 功能开发
1. 阅读 [任务管理器文档](./task-manager.md) 了解任务调度
2. 查看相关模块的源代码实现
3. 阅读 [脚本使用指南](./scripts-guide.md) 进行开发

### 问题排查
1. 查看各模块的错误处理章节
2. 阅读日志文件
3. 查看 [CLI使用指南](./cli-usage.md) 的调试部分

---

## 🔍 文档更新日志

### 2025-10-28
- ✨ 新增 DeepBooru 分析器支持
- 🎨 新增角色特征管理系统
- 🔧 新增批量文件/文件夹删除功能
- 📁 改进任务文件夹命名（时间戳+类型+哈希）
- 🖼️ 改进图片查看器（支持大图缩放）
- 💾 新增本地配置缓存
- 🌐 新增WebUI状态监控
- 🔄 改进任务队列监控（定期轮询）
- 🏷️ 新增任务类型中文显示

### 2025-01-27
- ✨ 新增 [任务管理器文档](./task-manager.md)
- 🔄 更新 AI模块文档，添加任务管理相关内容
- 🔄 更新爬虫模块文档，添加任务调度说明
- 🔄 更新标签模块文档，添加任务集成说明
- 🎨 统一文档风格和格式

---

## 💡 贡献指南

如发现文档问题或需要更新内容，请：
1. 提出 Issue 描述问题
2. 提交 Pull Request 更新文档
3. 参考现有文档风格保持一致性

---

## 📞 支持

如有任何问题，请查看：
- GitHub Issues
- 文档中的 "常见问题" 章节
- 各模块的 "错误处理" 章节

